var game={container:$(".container").first(),loader:$("<span>").addClass("loader"),message:$("<span>").addClass("message"),triesCounter:$("<small>").addClass("triescounter"),fork:$(".forklink"),scrollspeed:.4,timeToPick:25,timeToPlay:30,waitLimit:90,connectionLimit:60,dayLength:12,deadLength:10,width:12,height:8,tries:0,id:null,seed:null,skills:{},data:{},currentData:{},mode:"",status:"",currentState:"noscript",start:function(){game.topbar=$("<div>").addClass("topbar").append(game.loader,game.message,game.triesCounter),window.$&&window.JSON&&window.btoa&&window.atob&&window.XMLHttpRequest&&Modernizr.backgroundsize&&Modernizr.csstransforms&&Modernizr.generatedcontent&&Modernizr.rgba&&Modernizr.opacity?game.states.changeTo("loading"):game.states.changeTo("unsupported")},language:{current:"en-US",available:["en-US","pt-BR"],dir:""},db:function(a,b){"string"!=typeof a.data&&(a.data=JSON.stringify(a.data)),$.ajax({async:!0,type:"GET",url:"/db",data:a,timeout:4e3,complete:function(a){var c;a.responseText&&(c=JSON.parse(a.responseText)),b&&b(c||{})}})},random:function(){return game.seed+=1,parseFloat("0."+Math.sin(game.seed).toString().substr(6))},cancelEvent:function(a){return a&&a.preventDefault&&a.preventDefault(),!1},events:function(){game.card.bindJquery(),$.fn.leftClickEvent=game.leftClickEvent,$.fn.rightClickEvent=game.rightClickEvent,window.ontouchstart=function(a){var b=$(a.target);return b.is("input[type=text]")&&b.focus(),b.is("input[type=radio], input[type=checkbox], a")&&b.click(),a.preventDefault&&a.preventDefault(),!1},window.oncontextmenu=game.cancelEvent,window.onbeforeunload=function(){return"match"==game.mode?game.data.ui.leave:void 0}},leftClickEvent:function(a){return this.on("click touchstart",a),this},rightClickEvent:function(a){return this.on("contextmenu taphold drop dragdrop",a).on("dragenter dragover",game.cancelEvent),this},timeoutArray:[],timeout:function(a,b,c){var d=setTimeout(function(a){b(a),game.timeoutArray.erase(d)},a,c);return game.timeoutArray.push(d),d},clearTimeouts:function(){for(var a=0;a<game.timeoutArray.length;a++)clearTimeout(game.timeoutArray[a]);game.timeoutArray=[]},reset:function(){console.error("Internal error: ",game);var a=confirm(game.data.ui.error);a&&location.reload(!0)},test:function(){game.states.log.input.val("TestBot"),setTimeout(function(){game.states.log.button.click()}),setTimeout(function(){game.states.menu.tutorial.click()},1e3),setTimeout(function(){$(".pickedbox div:nth-child(1)").contextmenu()},2e3),setTimeout(function(){$(".pickedbox div:nth-child(2)").contextmenu()},2100),setTimeout(function(){$(".pickedbox div:nth-child(3)").contextmenu()},2200),setTimeout(function(){$(".pickedbox div:nth-child(4)").contextmenu()},2300),setTimeout(function(){$(".pickedbox div:nth-child(5)").contextmenu()},2400),setTimeout(function(){game.tutorial.axe.css({opacity:0})},2500),setTimeout(function(){game.match.buildSkills("single")},3e3),setTimeout(function(){$(".wk-stun.skills").appendTo(".player.hand")},4e3),setTimeout(function(){$(".map .hero.wk.player").place("G2"),game.status="turn"},5e3)}};