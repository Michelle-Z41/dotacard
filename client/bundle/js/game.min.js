var game={start:function(){game.events.build(),game.topbar=$("<div>").addClass("topbar").append(game.loader,game.message,game.triesCounter),window.$&&window.JSON&&window.localStorage&&window.btoa&&window.atob&&window.XMLHttpRequest&&Modernizr.backgroundsize&&Modernizr.csstransforms&&Modernizr.generatedcontent&&Modernizr.rgba&&Modernizr.opacity?game.states.changeTo("loading"):game.states.changeTo("unsupported")},container:$(".container"),loader:$("<span>").addClass("loader"),message:$("<span>").addClass("message"),triesCounter:$("<small>").addClass("triescounter"),scrollspeed:.4,timeToPick:25,timeToPlay:30,waitLimit:90,connectionLimit:60,dayLength:12,deadLength:10,width:12,height:8,tries:0,id:null,seed:null,skills:{},data:{},mode:"",status:"",currentData:{},currentState:"noscript",db:function(a,b){"string"!=typeof a.data&&(a.data=JSON.stringify(a.data)),$.ajax({async:!0,type:"GET",url:"/db",data:a,timeout:4e3,complete:function(a){var c;a.responseText&&(c=JSON.parse(a.responseText)),b&&b(c||{})}})},random:function(){return game.seed+=1,parseFloat("0."+Math.sin(game.seed).toString().substr(6))},reset:function(){console.error("Internal error: ",game);var a=confirm(game.data.ui.error);a&&location.reload(!0)},test:function(){game.states.log.input.val("TestBot"),setTimeout(function(){game.states.log.button.click()}),setTimeout(function(){game.states.menu.tutorial.click()},1e3),setTimeout(function(){$(".pickedbox div:nth-child(1)").contextmenu()},2e3),setTimeout(function(){$(".pickedbox div:nth-child(2)").contextmenu()},2100),setTimeout(function(){$(".pickedbox div:nth-child(3)").contextmenu()},2200),setTimeout(function(){$(".pickedbox div:nth-child(4)").contextmenu()},2300),setTimeout(function(){$(".pickedbox div:nth-child(5)").contextmenu()},2400),setTimeout(function(){game.tutorial.axe.css({opacity:0})},2500),setTimeout(function(){game.match.buildSkills("single")},3e3),setTimeout(function(){$(".wk-stun.skills").appendTo(".player.hand")},4e3),setTimeout(function(){$(".map .hero.wk.player").place("G2"),game.status="turn"},5e3)}};