game.states={el:$(".states").first(),build:function(){for(var a=["menu","options","choose","table"],b=0;b<a.length;b++)game.states.buildState(a[b])},buildState:function(a){var b=game.states[a];b&&!b.builded&&(b.builded=!0,b.el=$("<div>").addClass("state "+a).hide().appendTo(game.states.el),b.build&&b.build())},changeTo:function(a){if(a!==game.currentState){game.states.buildState(a);var b,c=game.currentState,d=game.states[c];d&&d.el&&d.el.fadeOut(100),d&&d.end&&d.end(),b=game.states[a],b.el&&setTimeout(function(){b.el.append(game.topbar).fadeIn(100)},120),game.currentState=a,game.backState=c,b.start&&b.start()}},backState:function(){game.states.changeTo(game.backState)}};