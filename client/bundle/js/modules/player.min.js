game.player={manaBuild:function(){game.player.mana=0,$(game.player.picks).each(function(a,b){var c=$(".card."+b);game.player.mana+=c.data("mana")}),game.player.cardsPerTurn=1+Math.round(game.player.mana/10),game.player.maxCards=Math.round(game.player.mana/2)},buyCard:function(){6===game.player.turn&&$(".player.deck.skills.ult .card").appendTo(game.player.skills.deck);var a,b,c,d=$(".skills.available.player.deck .card"),e=game.deck.randomCard(d);0===d.length&&$(".player.deck.skills.cemitery .card").appendTo(game.player.skills.deck),e.data("type")===game.data.ui.toggle?e.appendTo(game.player.skills.sidehand):e.data("type")===game.data.ui.automatic?(a=e.data("hero"),b=$(".map .player.heroes."+a),c=game.map.getPosition(b),e.passive(c),"tutorial"!==game.mode&&game.currentData.moves.push("P:"+c+":"+e.data("skill")+":"+a),e.appendTo(game.player.skills.sidehand)):e.appendTo(game.player.skills.hand)},buyHand:function(){var a;for(a=0;a<game.player.cardsPerTurn;a+=1)game.player.skills.hand.children().length<game.player.maxCards&&game.player.buyCard()},move:function(){var a=$(this),b=game.selectedCard,c=game.map.getPosition(b),d=game.map.getPosition(a);return"turn"===game.status&&a.hasClass("free")&&c!==d&&!b.hasClass("done")&&(b.move(d),"tutorial"!==game.mode&&game.currentData.moves.push("M:"+c+":"+d),game.map.unhighlight()),!1},attack:function(){var a=$(this),b=game.selectedCard,c=game.map.getPosition(b),d=game.map.getPosition(a);return"turn"===game.status&&b.data("damage")&&c!==d&&!b.hasClass("done")&&a.data("current hp")&&(b.attack(a),"tutorial"!==game.mode&&game.currentData.moves.push("A:"+c+":"+d),game.map.unhighlight()),!1},passive:function(){var a=$(this),b=game.selectedCard,c=b.data("hero"),d=b.data("skill"),e=game.map.getPosition(a);c&&d&&"turn"===game.status&&(game.audio.play("activate"),"tutorial"!==game.mode&&game.currentData.moves.push("P:"+e+":"+d+":"+c),b.passive(a),game.states.table.animateCast(b,a))},toggle:function(){var a=$(this),b=game.selectedCard,c=b.data("hero"),d=b.data("skill"),e=game.map.getPosition(a);c&&d&&"turn"===game.status&&(game.audio.play("activate"),"tutorial"!==game.mode&&game.currentData.moves.push("T:"+e+":"+d+":"+c),b.toggle(a),game.states.table.animateCast(b,a))},cast:function(){var a=$(this),b=game.selectedCard,c=$(".map .source"),d=game.map.getPosition(c),e=game.map.getPosition(a),f=b.data("hero"),g=b.data("skill");f&&g&&d&&e&&"turn"===game.status&&!c.hasClass("done")&&("tutorial"!==game.mode&&game.currentData.moves.push("C:"+d+":"+e+":"+g+":"+f),c.cast(b,e),game.states.table.animateCast(b,e))}};