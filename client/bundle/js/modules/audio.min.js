game.audio={sounds:["activate","crit","horn","battle","pick","tower/attack","tutorial/axehere","tutorial/axebattle","tutorial/axemove","tutorial/axeattack","tutorial/axetime","tutorial/axewait","tutorial/axeah","am/attack","am/burn","am/blink","am/ult","cm/attack","cm/freeze","cm/slow","cm/ult","ld/attack","ld/bear","ld/cry","ld/entangle","ld/rabid","ld/return","ld/transform","ld/ult","pud/attack","pud/hook","pud/rot","pud/ult","wk/attack","wk/stun","wk/ult","crit"],buffers:{},load:function(a,b){var c=new XMLHttpRequest;c.open("GET","/audio/"+a+".mp3",!0),c.responseType="arraybuffer",c.onload=function(){game.audio.context.decodeAudioData(c.response,function(c){game.audio.buffers[a]=c,b&&b()})},c.send()},build:function(){game.audio.context=new AudioContext,game.mute=game.audio.context.createGain(),game.mute.connect(game.audio.context.destination),game.audio.soundsNode=game.audio.context.createGain(),game.audio.soundsNode.connect(game.mute),game.audio.trackNode=game.audio.context.createGain(),game.audio.trackNode.connect(game.mute),game.mute.gain.value=.6,game.audio.loadTrack(),game.audio.loadSounds()},loadSounds:function(){$(game.audio.sounds).each(function(a,b){game.audio.load(b)})},loadTrack:function(){game.song="doomhammer",game.audio.load(game.song,function(){game.audio.play(game.song),setInterval(function(){game.audio.play(game.song)},1e3*game.audio.buffers[game.song].duration)})},play:function(a){if(game.audio.context&&game.audio.context.createBufferSource){var b=game.audio.context.createBufferSource();b.buffer=game.audio.buffers[a],a===game.song?b.connect(game.audio.trackNode):b.connect(game.audio.soundsNode),b.start()}},mute:function(){var a=game.unmutedvolume||game.mute.gain.value||.6;this.checked&&(a=0),localStorage.setItem("volume",a),game.mute.gain.value=a,game.states.options.volumecontrol.css("transform","scale("+a+")")},setVolume:function(){var a,b=localStorage.getItem("volume");b&&(a=parseFloat(b),0===a&&this.muteinput.prop("checked",!0),game.mute.gain.value=a,game.states.options.volumecontrol.css("transform","scale("+b+")"))},volumedown:function(a){var b=$(a.target).data("volume");b||(b=$(a.target).parent().data("volume")),game.audio.volumetarget=b,game.audio.volumechange(a),game.states.options[b+"input"].on("mousemove.volume",game.audio.volumechange)},volumeup:function(){game.audio.volumetarget&&(game.states.options[game.audio.volumetarget+"input"].off("mousemove.volume"),game.audio.volumetarget=!1)},volumechange:function(a){var b=parseInt((a.clientX-game.states.options.volumecontrol.offset().left)/4.8,10)/10;b>1&&(b=1),0>=b?(b=0,"volume"===game.audio.volumetarget&&game.states.options.muteinput.prop("checked",!0)):"volume"===game.audio.volumetarget&&game.states.options.muteinput.prop("checked",!1),game.states.options[game.audio.volumetarget+"control"].css("transform","scale("+b+")"),"volume"===game.audio.volumetarget?(game.mute.gain.value=b,localStorage.setItem("volume",b),game.unmutedvolume=b):"music"===game.audio.volumetarget?game.audio.trackNode.gain.value=b:"sounds"===game.audio.volumetarget&&(game.audio.soundsNode.gain.value=b)}};