game.states.log={remembername:!0,build:function(){this.box=$("<div>").appendTo(this.el).addClass("box"),$(".logo").clone().prependTo(this.box),this.title=$("<h1>").appendTo(this.box).text(game.data.ui.choosename),this.input=$("<input>").appendTo(this.box).attr({placeholder:game.data.ui.logtype,type:"text",maxlength:24}).keydown(function(a){13===a.which&&game.states.log.login()}),this.button=$("<div>").addClass("button").appendTo(this.box).text(game.data.ui.log).attr({title:game.data.ui.choosename}).onLeftClick(this.login),this.rememberlabel=$("<label>").appendTo(this.box).append($("<span>").text(game.data.ui.remember)),this.remembercheck=$("<input>").attr({type:"checkbox",name:"remember",checked:!0}).change(this.remember).appendTo(this.rememberlabel);var a=localStorage.getItem("name");a&&this.input.val(a),this.out=$("<small>").addClass("logout").insertAfter(game.message).text(game.data.ui.logout).onLeftClick(this.logout)},start:function(){game.message.html('Version <small class="version">'+game.version+"</small>"),game.states.log.out.hide(),this.input.focus(),game.states.options.opt.show()},login:function(){var a=game.states.log.input.val();a?(game.player.name=a,game.states.log.remembername?localStorage.setItem("name",a):localStorage.removeItem("name"),game.states.log.button.attr("disabled",!0),game.loader.addClass("loading"),game.db({get:"server"},function(a){"online"===a.status?(game.states.log.out.show(),game.states.changeTo("menu")):game.reset()})):game.states.log.input.focus()},logout:function(){game.mode&&(game.states[game.currentState].clear&&game.states[game.currentState].clear(),game[game.mode].clear(),game.clearTimeouts()),game.states.changeTo("log")},end:function(){this.button.attr("disabled",!1)},remember:function(){game.states.log.remembername=!game.states.log.remembername,game.states.log.remembername||localStorage.getItem("name")}};